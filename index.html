<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>吕昕橦律师事务所 - 专业法律服务</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* 平滑滚动 */
        html {
            scroll-behavior: smooth;
        }

        /* 确保锚点位置正确（避免被固定导航栏遮挡） */
        section[id] {
            scroll-margin-top: 80px;
        }
    </style>
</head>
<body>
    <!-- 导航栏容器 -->
    <div id="header-container"></div>

    <!-- 主要内容 -->
    <main class="main-content">
        <!-- 主页区域 - 动态加载 -->
        <div id="section-home"></div>

        <!-- 业务领域区域 -->
        <section id="services">
            <h2 class="section-title" data-i18n="services.title">业务领域</h2>
            <div class="services-container">
                <!-- 民事诉讼服务 -->
                <div id="section-services-civil"></div>

                <!-- 移民法律服务 -->
                <div id="section-services-immigration"></div>

                <!-- 婚姻家事法律服务 -->
                <div id="section-services-familylaw"></div>

                <!-- 房地产法律服务 -->
                <div id="section-services-realproperty"></div>

                <!-- 人身伤害服务 -->
                <div id="section-services-personalinjury"></div>

                <!-- 刑事辩护服务 -->
                <div id="section-services-criminal"></div>

                <!-- 商业法律服务 -->
                <div id="section-services-business"></div>

                <!-- 知识产权法律服务 -->
                <div id="section-services-ip"></div>
            </div>
        </section>

        <!-- 预约律师区域 - 动态加载 -->
        <div id="section-appointment"></div>

        <!-- 联系方式区域 - 动态加载 -->
        <div id="section-contact"></div>
    </main>

    <!-- 模态窗口 -->
    <div id="caseModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">案例详情</h2>
                <button class="close-btn" onclick="closeModal()">×</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- 内容将通过JavaScript动态加载 -->
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/modules/caseData.js"></script>
    <script src="js/script.js"></script>
    <script>
        // 模块加载器
        async function loadSection(sectionName, targetId) {
            try {
                const response = await fetch(`sections/${sectionName}.html`);
                if (!response.ok) {
                    throw new Error(`Failed to load ${sectionName}`);
                }
                const html = await response.text();
                document.getElementById(targetId).innerHTML = html;
            } catch (error) {
                console.error(`Error loading section ${sectionName}:`, error);
            }
        }

        // 组件加载器
        async function loadComponent(componentName, targetId) {
            try {
                const response = await fetch(`components/${componentName}.html`);
                if (!response.ok) {
                    throw new Error(`Failed to load ${componentName}`);
                }
                const html = await response.text();
                document.getElementById(targetId).innerHTML = html;
            } catch (error) {
                console.error(`Error loading component ${componentName}:`, error);
            }
        }

        // 更新联系页面信息
        function updateContactPageInfo() {
            if (typeof getContactInfo === 'function') {
                const info = getContactInfo();

                // 更新联系信息
                const lawyerName = document.getElementById('contact-lawyer-name');
                const email = document.getElementById('contact-email');
                const wechat = document.getElementById('contact-wechat');
                const officeHours = document.getElementById('contact-office-hours');

                if (lawyerName) lawyerName.textContent = info.lawyerName;
                if (email) email.textContent = info.email;
                if (wechat) wechat.textContent = info.wechat;
                if (officeHours) officeHours.innerHTML = info.officeHours;

                // 地址拼接
                const fullAddress = info.phone2
                    ? `${info.address}, ${info.addressDetail}`
                    : info.address;
                const address = document.getElementById('contact-address');
                if (address) address.textContent = fullAddress;

                // 电话处理
                const phoneDisplay = info.phone2
                    ? `${info.phone1} / ${info.phone2}`
                    : info.phone1;
                const phone = document.getElementById('contact-phone');
                if (phone) phone.textContent = phoneDisplay;

                // 如果没有第二个电话，隐藏部分空格
                if (!info.phone2) {
                    const phoneItem = document.getElementById('contact-phone-item');
                    if (phoneItem) phoneItem.style.marginBottom = '0';
                }
            }
        }

        // 页面加载时自动加载所有模块
        document.addEventListener('DOMContentLoaded', async function() {
            // 加载导航和页脚组件
            await loadComponent('header', 'header-container');

            // 加载各个区域模块
            await loadSection('home', 'section-home');
            await loadSection('services-civil', 'section-services-civil');
            await loadSection('services-immigration', 'section-services-immigration');
            await loadSection('services-familylaw', 'section-services-familylaw');
            await loadSection('services-realproperty', 'section-services-realproperty');
            await loadSection('services-personalinjury', 'section-services-personalinjury');
            await loadSection('services-criminal', 'section-services-criminal');
            await loadSection('services-business', 'section-services-business');
            await loadSection('services-ip', 'section-services-ip');
            await loadSection('appointment', 'section-appointment');
            await loadSection('contact', 'section-contact');

            // 加载footer（在contact section里面）
            await loadComponent('footer', 'footer-container');

            // 更新联系页面信息
            updateContactPageInfo();
        });
    </script>
</body>
</html>
